<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Episode 1: The Invisible Linked List - From Algorithm to Engineering</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js/dist/reveal.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js/dist/theme/black.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js/plugin/highlight/monokai.css">
  <style>
    .reveal { 
      font-family: 'Segoe UI', 'Arial', sans-serif; 
      font-size: 28px !important;
    }
    .reveal .slides { font-size: 28px !important; }
    .reveal h1 { font-size: 1.8em !important; }
    .reveal h2 { font-size: 1.4em !important; }
    .reveal h3 { font-size: 1.15em !important; }
    .reveal h1, .reveal h2, .reveal h3 { text-transform: none; }
    
    /* Thesis and Framework Styles */
    .thesis-box {
      background: linear-gradient(135deg, rgba(245,158,66,0.9), rgba(245,87,108,0.9));
      border: 2px solid #f59e42;
      border-radius: 10px;
      margin: 12px auto;
      padding: 12px 18px;
      font-size: 0.85em;
      font-weight: bold;
      box-shadow: 0 4px 15px rgba(245,158,66,0.3);
      color: #fff;
      max-width: 98%;
      text-align: center;
    }
    
    .series-framework {
      background: rgba(79,172,254,0.15);
      border: 1px solid #4facfe;
      border-radius: 8px;
      margin: 10px auto;
      padding: 10px 15px;
      font-size: 0.75em;
      color: #4facfe;
      max-width: 98%;
      text-align: left;
    }
    
    /* Failure Mode Styles */
    .failure-mode {
      background: linear-gradient(135deg, rgba(239,68,68,0.9), rgba(245,87,108,0.9));
      border: 2px solid #ef4444;
      border-radius: 6px;
      margin: 10px auto;
      padding: 10px 14px;
      font-size: 0.7em;
      box-shadow: 0 3px 10px rgba(239,68,68,0.4);
      color: #fff;
      max-width: 98%;
      text-align: left;
      animation: pulseRed 2s infinite alternate;
    }
    
    @keyframes pulseRed {
      from { box-shadow: 0 6px 20px rgba(239,68,68,0.4); }
      to { box-shadow: 0 8px 30px rgba(239,68,68,0.7); }
    }
    
    .pressure-point {
      background: rgba(255,255,100,0.2);
      border-left: 3px solid #facc15;
      padding: 6px 12px;
      margin: 6px 0;
      border-radius: 0 4px 4px 0;
      font-size: 0.75em;
    }
    
    .reality-check {
      background: rgba(245,158,66,0.2);
      border-left: 3px solid #f59e42;
      padding: 6px 12px;
      margin: 6px 0;
      border-radius: 0 4px 4px 0;
      font-size: 0.75em;
      font-style: italic;
    }
    
    /* Engineering Solution Styles */
    .engineering-solution {
      background: linear-gradient(135deg, rgba(34,197,94,0.9), rgba(79,172,254,0.9));
      border: 2px solid #22c55e;
      border-radius: 6px;
      margin: 10px auto;
      padding: 10px 14px;
      font-size: 0.7em;
      box-shadow: 0 3px 10px rgba(34,197,94,0.4);
      color: #fff;
      max-width: 98%;
      text-align: left;
    }
    
    /* Drama and Tension Styles */
    .perfect-storm {
      background: radial-gradient(circle, rgba(239,68,68,0.9), rgba(127,29,29,0.9));
      border: 3px solid #dc2626;
      border-radius: 15px;
      margin: 25px auto;
      padding: 25px 30px;
      font-size: 0.9em;
      box-shadow: 0 10px 40px rgba(239,68,68,0.6);
      color: #fff;
      max-width: 90%;
      text-align: center;
      animation: dramaticPulse 1.5s infinite alternate;
    }
    
    @keyframes dramaticPulse {
      from { 
        transform: scale(1);
        box-shadow: 0 10px 40px rgba(239,68,68,0.6);
      }
      to { 
        transform: scale(1.02);
        box-shadow: 0 15px 50px rgba(239,68,68,0.8);
      }
    }
    
    .doomed-text {
      color: #ef4444;
      font-weight: bold;
      font-style: italic;
      animation: fadeInRed 2s ease;
    }
    
    @keyframes fadeInRed {
      from { opacity: 0; color: #666; }
      to { opacity: 1; color: #ef4444; }
    }
    /* Stats and Comparisons */
    .comparison-dramatic {
      display: flex;
      gap: 12px;
      justify-content: center;
      margin: 12px 0;
      font-size: 0.65em;
    }
    
    .comparison-side {
      padding: 10px;
      border-radius: 6px;
      width: 48%;
      text-align: left;
    }
    
    .comparison-side.algorithm {
      background: rgba(79,172,254,0.2);
      border: 2px solid #4facfe;
    }
    
    .comparison-side.engineering {
      background: rgba(34,197,94,0.2);
      border: 2px solid #22c55e;
    }
    
    .comparison-side.broken {
      background: rgba(239,68,68,0.2);
      border: 2px solid #ef4444;
    }
    .feynman-diagram {
      background: rgba(236,254,255,0.95);
      border-left: 6px solid #06b6d4;
      border-radius: 10px;
      margin: 16px auto;
      padding: 14px 22px;
      font-size: 0.82em;
      box-shadow: 0 2px 12px 0 rgba(6,182,212,0.15);
      color: #0e3a4a;
      max-width: 85%;
      text-align: left;
    }
    .scale-break {
      background: rgba(255,245,230,0.95);
      border-left: 6px solid #f59e42;
      border-radius: 10px;
      margin: 18px auto;
      padding: 16px 22px;
      font-size: 0.85em;
      box-shadow: 0 2px 12px 0 rgba(245,158,66,0.15);
      color: #7c4700;
      max-width: 85%;
      text-align: left;
    }
    .comparison {
      display: flex;
      gap: 10px;
      justify-content: center;
      margin: 10px 0;
      font-size: 0.65em;
    }
    .comparison-side {
      padding: 10px;
      border-radius: 6px;
      width: 48%;
      text-align: left;
    }
    .comparison-side.naive {
      background: rgba(255,100,100,0.15);
      border: 2px solid #f5576c;
    }
    .comparison-side.production {
      background: rgba(100,255,200,0.15);
      border: 2px solid #3ec6a8;
    }
    .comparison-title {
      font-weight: bold;
      margin-bottom: 12px;
      font-size: 1.1em;
    }
    .stats-row {
      display: flex;
      gap: 12px;
      justify-content: center;
      margin: 12px 0;
    }
    .stat-card {
      background: rgba(255,255,255,0.1);
      border-radius: 6px;
      padding: 8px 15px;
      text-align: center;
    }
    .stat-value {
      font-size: 1.4em;
      font-weight: bold;
      color: #4facfe;
    }
    .stat-label {
      font-size: 0.7em;
      opacity: 0.8;
    }
    .reveal pre {
      font-size: 0.75em;
      width: 98%;
      margin: 0 auto;
      line-height: 1.4;
    }
    .reveal pre code {
      max-height: 380px;
      overflow-y: auto;
      padding: 12px 15px;
      border-radius: 8px;
      font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
    }
    .act-intro {
      font-size: 0.75em;
      opacity: 0.9;
      max-width: 95%;
      margin: 0 auto;
      line-height: 1.5;
    }
    blockquote {
      font-style: italic;
      border-left: 4px solid #4facfe;
      padding-left: 20px;
      margin: 20px auto;
      max-width: 80%;
    }
    /* Animation Canvas Styles */
    .animation-canvas {
      width: 90%;
      height: 280px;
      background: rgba(255,255,255,0.08);
      border-radius: 12px;
      position: relative;
      overflow: hidden;
      margin: 15px auto;
      border: 1px solid rgba(255,255,255,0.15);
    }
    .control-panel {
      display: flex;
      gap: 10px;
      justify-content: center;
      margin: 15px 0;
      flex-wrap: wrap;
    }
    .btn {
      padding: 8px 18px;
      background: rgba(79, 172, 254, 0.2);
      border: 1.5px solid #4facfe;
      border-radius: 8px;
      color: #4facfe;
      cursor: pointer;
      font-size: 14px;
      font-weight: 600;
      transition: all 0.2s ease;
    }
    .btn:hover {
      background: rgba(79, 172, 254, 0.35);
      transform: translateY(-1px);
    }
    .btn.secondary {
      background: rgba(245, 158, 66, 0.2);
      border-color: #f59e42;
      color: #f59e42;
    }
    .btn.secondary:hover {
      background: rgba(245, 158, 66, 0.35);
    }
    .btn.success {
      background: rgba(62, 198, 168, 0.2);
      border-color: #3ec6a8;
      color: #3ec6a8;
    }
    .btn.success:hover {
      background: rgba(62, 198, 168, 0.35);
    }
    .node {
      position: absolute;
      width: 60px;
      height: 60px;
      border-radius: 50%;
      background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      color: #000;
      font-weight: 700;
      box-shadow: 0 4px 16px rgba(79, 172, 254, 0.4);
      transition: all 0.8s cubic-bezier(0.68, -0.55, 0.265, 1.55);
      font-size: 0.8em;
    }
    .node .label { font-size: 10px; opacity: 0.8; }
    .node .value { font-size: 16px; margin-top: 2px; }
    .node.highlight {
      animation: pulse 1.5s infinite;
      box-shadow: 0 0 20px rgba(79, 172, 254, 0.8);
    }
    .arrow {
      position: absolute;
      height: 3px;
      background: #4facfe;
      transform-origin: left center;
      transition: all 0.8s ease;
    }
    .arrow::after {
      content: '';
      position: absolute;
      right: -8px;
      top: -4px;
      border-left: 10px solid #4facfe;
      border-top: 5px solid transparent;
      border-bottom: 5px solid transparent;
    }
    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.1); }
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(15px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .result-box {
      margin: 15px auto;
      padding: 12px 18px;
      border-radius: 8px;
      max-width: 85%;
      font-size: 0.85em;
      display: none;
    }
    .result-box.error {
      background: rgba(245, 87, 108, 0.2);
      border: 2px solid #f5576c;
      color: #ff9999;
    }
    .result-box.success {
      background: rgba(79, 172, 254, 0.2);
      border: 2px solid #4facfe;
      color: #99ddff;
    }
  </style>
</head>
<body>
  <div class="reveal">
    <div class="slides">

      <!-- ============ TITLE & THESIS ============ -->
      <section>
        <h1>üîó The Invisible Linked List</h1>
        <p style="font-size:0.85em;opacity:0.8;">From LeetCode to Production</p>
        
        <div class="thesis-box">
          <strong>THESIS:</strong><br>
          Algorithms answer "Can this work?"<br>
          Engineering answers "What happens when it's used?"
        </div>
        
        <p style="font-size:0.7em;color:#4facfe;">Episode 1 ‚Ä¢ Season 1: The Invisible Linked List</p>
        <aside class="notes">Today we'll watch a beautiful algorithm die under pressure, and see how engineering brings it back to life.</aside>
      </section>

      <!-- ============ THE CHALLENGE ============ -->
      <section>
        <h2>The Challenge</h2>
        
        <div style="display: flex; justify-content: space-between; align-items: center; margin: 30px 0;">
          <div style="text-align: left; flex: 1;">
            <h3 style="color: #4facfe;">Git Powers:</h3>
            <ul style="font-size: 0.75em; line-height: 1.4;">
              <li>100+ million developers</li>
              <li>330+ million repositories</li>
              <li>20+ billion commits</li>
              <li>Every tech company on Earth</li>
            </ul>
          </div>
          <div style="font-size: 3em; color: #f59e42;">‚ö°</div>
          <div style="text-align: left; flex: 1;">
            <h3 style="color: #ef4444;">The Question:</h3>
            <p style="font-size: 0.75em; line-height: 1.4;">
              How does a simple linked list handle this scale?
            </p>
            <p style="font-size: 0.85em; color: #ef4444; font-weight: bold;">
              Answer: It doesn't.
            </p>
          </div>
        </div>
        
        <div class="dramatic-quote">
          "This is the story of that death and resurrection."
        </div>
        <aside class="notes">This sets the stakes. We're not talking about toy problems - we're talking about systems that power the entire software industry.</aside>
      </section>

      <!-- ============ ACT I: THE PERFECT ALGORITHM ============ -->
      <section>
        <section>
          <div class="act-title">
            <h1>üé≠ ACT I</h1>
            <h2>The Perfect Algorithm</h2>
          </div>
          <aside class="notes">The first act establishes the elegant simplicity that LeetCode teaches us.</aside>
        </section>
        
        <section>
          <h2>The LeetCode Interview Question</h2>
          <p style="font-size: 0.85em; color: #4facfe; margin-bottom: 20px;">
            "Implement a system to track commit history with parent pointers."
          </p>
          
          <div style="background: rgba(79,172,254,0.1); padding: 25px; border-radius: 15px; text-align: left;">
            <pre style="font-size: 1em; margin: 0;"><code class="language-python">class Commit:
    def __init__(self, hash_id, parent=None):
        self.hash_id = hash_id
        self.parent = parent
        
    def get_history(self):
        history = []
        current = self
        while current:
            history.append(current.hash_id)
            current = current.parent
        return history</code></pre>
          </div>
          
          <p style="margin-top: 15px; color: #22c55e; font-size: 0.75em;">
            ‚úì Clean code ‚Ä¢ ‚úì O(n) traversal ‚Ä¢ ‚úì Simple structure
          </p>
          <aside class="notes">This is what we learn in school. Elegant, simple, and it works perfectly... in theory.</aside>
        </section>
        
        <section>
          <h2>Initial Beauty</h2>
          
          <div class="comparison-dramatic">
            <div class="comparison-side algorithm">
              <h3>üîó Linked List</h3>
              <ul>
                <li><strong>Conceptual clarity</strong></li>
                <li>Forward traversal</li>
                <li>Natural ordering</li>
                <li>Memory efficient</li>
                <li>Insert at head: O(1)</li>
                <li>Clean abstraction</li>
              </ul>
            </div>
            
            <div class="comparison-side algorithm">
              <h3>üí´ Perfect for Git</h3>
              <ul>
                <li><strong>Sequential history</strong></li>
                <li>Parent ‚Üí Child chain</li>
                <li>Chronological order</li>
                <li>Natural fit</li>
                <li>New commit: O(1)</li>
                <li>Elegant design</li>
              </ul>
            </div>
          </div>
          
          <p style="text-align: center; font-size: 0.9em; color: #4facfe; margin-top: 20px;">
            "It's beautiful. It's perfect. It's going to die."
          </p>
          <aside class="notes">This is the honeymoon period. Everything makes sense. The data structure fits the problem perfectly.</aside>
        </section>
        
        <section>
          <h2>The Demo</h2>
          <p style="font-size: 0.75em; margin-bottom: 20px;">Let's see our beautiful algorithm in action:</p>
          
          <div style="background: rgba(34,34,34,0.8); padding: 25px; border-radius: 15px; text-align: left; font-family: 'Courier New', monospace;">
            <div style="color: #4facfe; margin-bottom: 15px;"># Building our commit chain</div>
            <div style="color: #22c55e;">commit_a = Commit("abc123")</div>
            <div style="color: #22c55e;">commit_b = Commit("def456", parent=commit_a)</div>
            <div style="color: #22c55e;">commit_c = Commit("ghi789", parent=commit_b)</div>
            <div style="margin: 15px 0; color: #f59e42;"># Get history from latest</div>
            <div style="color: #22c55e;">print(commit_c.get_history())</div>
            <div style="color: #888; margin-top: 10px;"># Output: ['ghi789', 'def456', 'abc123']</div>
          </div>
          
          <p style="text-align: center; margin-top: 15px; font-size: 0.85em; color: #22c55e;">
            ‚ú® Perfect! Elegant! Ready for production!
          </p>
          <aside class="notes">Look how clean this is. This is what algorithms class taught us. This is what passes the interview.</aside>
        </section>
        <section>
          <h3>Complexity</h3>
          <div class="stats-row">
            <div class="stat-card">
              <div class="stat-label">Time</div>
              <div class="stat-value">O(n)</div>
            </div>
            <div class="stat-card">
              <div class="stat-label">Traversal Space</div>
              <div class="stat-value">O(1)</div>
            </div>
            <div class="stat-card">
              <div class="stat-label">Lines</div>
              <div class="stat-value">15</div>
            </div>
          </div>
          <p style="font-size:0.7em; opacity:0.8; margin-top:15px;">
            <em>Traversal uses O(1) extra memory; storing the full history is O(n).</em>
          </p>
          <aside class="notes">Simple, elegant, and efficient. Note the distinction: iterator is O(1), but if you materialize all commits, that's O(n).</aside>
        </section>
        <section>
          <h3>üîó How <code>git log</code> Works</h3>
          <div class="animation-canvas" id="canvas-gitlog"></div>
          <div class="control-panel">
            <button class="btn" onclick="gitLogAnim.addCommit()">Make Commit</button>
            <button class="btn success" onclick="gitLogAnim.runGitLog()">Run git log</button>
            <button class="btn secondary" onclick="gitLogAnim.reset()">Reset</button>
          </div>
          <pre style="margin-top:10px;"><code id="git-log-output" class="language-bash" style="max-height:150px;">$ git log
# Click "Run git log" to traverse the linked list...</code></pre>
          <aside class="notes">This is the magic! git log simply traverses from HEAD following parent pointers. Each commit points to its parent, creating the chain.</aside>
        </section>
        <section>
          <h3>The Traversal Algorithm</h3>
          <pre><code class="language-python">def git_log(head):
    """Traverse the commit linked list"""
    current = head  # Start from most recent
    
    while current is not None:
        print(f"commit {current.hash}")
        print(f"Author: {current.author}")
        print(f"Date: {current.date}")
        print(f"\n    {current.message}\n")
        
        current = current.parent  # Follow the link!
    
# This is literally how git log works!
# O(n) traversal through the linked list</code></pre>
          <div class="feynman-why" style="margin-top:15px;">
            <strong>üí° Key Insight:</strong> Every <code>git log</code>, <code>git blame</code>, and <code>git bisect</code> 
            traverses this same linked list structure. The parent pointer IS the history.
          </div>
        </section>

        <!-- Scale Breaks Ahead Transition -->
        <section data-background-gradient="linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%)">
          <h3>‚ö†Ô∏è But Wait...</h3>
          <h2 style="color:#f59e42;">This Needs Work to Scale</h2>
          <p class="act-intro" style="margin-top:30px;">
            Our simple linked list is elegant, but production systems face <strong>brutal reality</strong>.
          </p>
          
          <div style="display:flex; gap:15px; justify-content:center; flex-wrap:wrap; margin-top:30px;">
            <div class="stat-card" style="background:rgba(245,87,108,0.15); border:1px solid #f5576c;">
              <div class="stat-value" style="color:#f5576c; font-size:1.4em;">üí•</div>
              <div class="stat-label">Memory Explosion</div>
              <div style="font-size:0.6em; opacity:0.8;">100K commits = 10GB?</div>
            </div>
            <div class="stat-card" style="background:rgba(245,158,66,0.15); border:1px solid #f59e42;">
              <div class="stat-value" style="color:#f59e42; font-size:1.4em;">üîÑ</div>
              <div class="stat-label">Duplicate Data</div>
              <div style="font-size:0.6em; opacity:0.8;">Same file, 1000 copies?</div>
            </div>
            <div class="stat-card" style="background:rgba(147,51,234,0.15); border:1px solid #9333ea;">
              <div class="stat-value" style="color:#9333ea; font-size:1.4em;">üêå</div>
              <div class="stat-label">Slow Lookups</div>
              <div style="font-size:0.6em; opacity:0.8;">O(n) for everything?</div>
            </div>
            <div class="stat-card" style="background:rgba(239,68,68,0.15); border:1px solid #ef4444;">
              <div class="stat-value" style="color:#ef4444; font-size:1.4em;">‚ôæÔ∏è</div>
              <div class="stat-label">Memory Leaks</div>
              <div style="font-size:0.6em; opacity:0.8;">Unbounded history?</div>
            </div>
          </div>

          <p style="margin-top:35px; font-size:0.85em; color:#4facfe;">
            Let's see how Git solves each of these <strong>"Scale Breaks"</strong>...
          </p>
          <aside class="notes">This is the transition point. We've established the basic structure, now we'll explore each production challenge and how Git elegantly solves them.</aside>
        </section>
      </section>

      <!-- ============ ACT 2: Memory Explosion ============ -->
      <section>
        <section>
          <h2>Act 2: Scale Break #1</h2>
          <h3 style="color:#f59e42;">Memory Explosion üí•</h3>
          <aside class="notes">What happens when you add more commits? Memory becomes a problem.</aside>
        </section>
        <section>
          <div class="scale-break">
            <strong>‚ö†Ô∏è The Problem</strong><br>
            Every commit stores a full snapshot. 100K commits = 1-10GB naive storage.<br>
            Without compression, Git would be unusable at scale.
          </div>
        </section>
        <section>
          <div class="feynman-why">
            <strong>Why does this matter?</strong><br>
            If Git stored every file every time, your repo would explode in size. Understanding this is key to appreciating Git's efficiency tricks.
          </div>
        </section>
        <section>
          <h3>üìä Snapshot vs. Delta</h3>
          <div class="animation-canvas" id="canvas2"></div>
          <div class="control-panel">
            <button class="btn" onclick="anim2.addCommits()">Add 10 Commits</button>
            <button class="btn success" onclick="anim2.applyPackfile()">Apply Packfile</button>
            <button class="btn" onclick="anim2.reset()">Reset</button>
          </div>
          <div class="stats-row">
            <div class="stat-card">
              <div class="stat-label">Naive</div>
              <div class="stat-value" style="color:#f5576c;" id="naive-size">0 MB</div>
            </div>
            <div class="stat-card">
              <div class="stat-label">Packfile</div>
              <div class="stat-value" style="color:#3ec6a8;" id="packfile-size">0 MB</div>
            </div>
          </div>
        </section>
        <section>
          <h3>Naive vs Production</h3>
          <div class="comparison">
            <div class="comparison-side naive">
              <div class="comparison-title" style="color:#f5576c;">‚ùå Naive Storage</div>
              <ul>
                <li>Full snapshot per commit</li>
                <li>No deduplication</li>
                <li>No compression</li>
                <li>100K commits = 10-100GB</li>
              </ul>
            </div>
            <div class="comparison-side production">
              <div class="comparison-title" style="color:#3ec6a8;">‚úì Packfile</div>
              <ul>
                <li>Delta compression</li>
                <li>Content-addressable</li>
                <li>Binary diff algorithm</li>
                <li>100K commits = ~1GB</li>
              </ul>
            </div>
          </div>
        </section>
        <section>
          <div class="stats-row">
            <div class="stat-card">
              <div class="stat-label">Naive</div>
              <div class="stat-value" style="color:#f5576c;">10 GB</div>
            </div>
            <div class="stat-card">
              <div class="stat-label">Packfile</div>
              <div class="stat-value" style="color:#3ec6a8;">1 GB</div>
            </div>
            <div class="stat-card">
              <div class="stat-label">Savings</div>
              <div class="stat-value">90%</div>
            </div>
          </div>
        </section>
      </section>

      <!-- ============ ACT 2.5: Content-Addressable Storage ============ -->
      <section>
        <section>
          <h2>Content-Addressable Storage</h2>
          <h3 style="color:#059669;">Git's Secret Weapon ‚ú®</h3>
          <p style="font-size:0.6em; color:#4facfe; margin-top:10px;">The engineering pattern that makes Git possible</p>
        </section>
        
        <!-- WHAT IS IT? -->
        <section>
          <h3>What is Content-Addressable Storage?</h3>
          <div style="display: flex; gap: 12px; margin: 12px 0;">
            <div style="flex: 1; background: rgba(239,68,68,0.2); padding: 10px; border-radius: 6px; border: 2px solid #ef4444;">
              <h4 style="color: #ef4444; margin: 0 0 6px 0; font-size: 0.7em;">‚ùå Traditional Storage</h4>
              <p style="font-size: 0.55em; margin: 0;">Address = <strong>WHERE</strong> you put it</p>
              <code style="font-size: 0.5em; color: #888;">C:\Projects\readme.txt</code>
              <p style="font-size: 0.5em; margin: 6px 0 0 0; opacity: 0.8;">Like a library that files books by shelf location</p>
            </div>
            <div style="flex: 1; background: rgba(34,197,94,0.2); padding: 10px; border-radius: 6px; border: 2px solid #22c55e;">
              <h4 style="color: #22c55e; margin: 0 0 6px 0; font-size: 0.7em;">‚úì Content-Addressable</h4>
              <p style="font-size: 0.55em; margin: 0;">Address = <strong>WHAT</strong> it contains</p>
              <code style="font-size: 0.5em; color: #888;">a94a8f...e92bc</code>
              <p style="font-size: 0.5em; margin: 6px 0 0 0; opacity: 0.8;">Like a library that files books by ISBN</p>
            </div>
          </div>
          <div class="thesis-box" style="font-size: 0.55em; padding: 8px;">
            <strong>KEY INSIGHT:</strong> The content itself determines its address (via hashing)
          </div>
        </section>
        
        <!-- HOW DOES IT WORK? -->
        <section>
          <h3>How Does It Work?</h3>
          <div style="background: rgba(34,34,34,0.9); padding: 12px; border-radius: 8px; text-align: left; font-size: 0.55em;">
            <div style="margin-bottom: 10px;">
              <span style="color: #4facfe;">Step 1:</span> Take any content<br>
              <code style="color: #22c55e; margin-left: 15px;">"Hello, World!"</code>
            </div>
            <div style="margin-bottom: 10px;">
              <span style="color: #4facfe;">Step 2:</span> Run it through a hash function (SHA-1)<br>
              <code style="color: #f59e42; margin-left: 15px;">SHA1("Hello, World!") ‚Üí </code><code style="color: #22c55e;">943a702...</code>
            </div>
            <div style="margin-bottom: 10px;">
              <span style="color: #4facfe;">Step 3:</span> Use that hash as the storage address<br>
              <code style="color: #888; margin-left: 15px;">.git/objects/94/3a702...</code>
            </div>
            <div style="border-top: 1px solid #444; padding-top: 8px; margin-top: 8px;">
              <span style="color: #ef4444;">üîë Magic Property:</span> Same content <strong>ALWAYS</strong> produces same hash<br>
              <span style="font-size: 0.9em; opacity: 0.8; margin-left: 15px;">‚Üí Automatic deduplication!</span>
            </div>
          </div>
        </section>
        
        <!-- WHY IT MATTERS -->
        <section>
          <h3>Why This Changes Everything</h3>
          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px; font-size: 0.5em;">
            <div style="background: rgba(79,172,254,0.15); padding: 8px; border-radius: 5px;">
              <strong style="color: #4facfe;">üîÑ Deduplication</strong><br>
              1000 identical files = 1 blob stored<br>
              <span style="opacity: 0.7;">Huge space savings</span>
            </div>
            <div style="background: rgba(34,197,94,0.15); padding: 8px; border-radius: 5px;">
              <strong style="color: #22c55e;">‚úì Integrity</strong><br>
              Hash = checksum<br>
              <span style="opacity: 0.7;">Corruption is detectable</span>
            </div>
            <div style="background: rgba(245,158,66,0.15); padding: 8px; border-radius: 5px;">
              <strong style="color: #f59e42;">‚ö° Fast Comparison</strong><br>
              Compare hashes, not content<br>
              <span style="opacity: 0.7;">O(1) instead of O(n)</span>
            </div>
            <div style="background: rgba(168,85,247,0.15); padding: 8px; border-radius: 5px;">
              <strong style="color: #a855f7;">üåê Distributed</strong><br>
              Same content = same hash everywhere<br>
              <span style="opacity: 0.7;">No central authority needed</span>
            </div>
          </div>
        </section>
        
        <!-- REAL EXAMPLE -->
        <section>
          <h3>Real Git Example</h3>
          <div style="background: rgba(34,34,34,0.9); padding: 10px; border-radius: 6px; font-size: 0.5em; text-align: left;">
            <div style="color: #4facfe; margin-bottom: 6px;"># Create a file and see its blob hash</div>
            <code style="color: #22c55e;">$ echo "Hello Git" | git hash-object --stdin</code><br>
            <code style="color: #f59e42;">9f4d96d5b00d98959ea9960f069585ce42b1349a</code>
            <div style="margin: 10px 0; border-top: 1px solid #444; padding-top: 8px;">
              <div style="color: #4facfe; margin-bottom: 6px;"># Run it again - SAME hash!</div>
              <code style="color: #22c55e;">$ echo "Hello Git" | git hash-object --stdin</code><br>
              <code style="color: #f59e42;">9f4d96d5b00d98959ea9960f069585ce42b1349a</code>
            </div>
            <div style="margin-top: 10px; padding: 6px; background: rgba(34,197,94,0.2); border-radius: 4px;">
              <strong style="color: #22c55e;">‚Üí This is why "git clone" is so fast!</strong><br>
              <span style="opacity: 0.8;">Objects only transfer once, identified by hash</span>
            </div>
          </div>
        </section>
        
        <!-- ANIMATION -->
        <section>
          <h3>üìä See It In Action</h3>
          <div class="animation-canvas" id="canvas2b"></div>
          <div class="control-panel">
            <button class="btn" onclick="anim2b.addDuplicateFiles()">Add Duplicate Files</button>
            <button class="btn success" onclick="anim2b.deduplicate()">Apply Content-Addressable</button>
            <button class="btn" onclick="anim2b.reset()">Reset</button>
          </div>
          <div class="stats-row">
            <div class="stat-card">
              <div class="stat-label">Files Added</div>
              <div class="stat-value" id="files-added">0</div>
            </div>
            <div class="stat-card">
              <div class="stat-label">Unique Blobs</div>
              <div class="stat-value" style="color:#3ec6a8;" id="blobs-stored">0</div>
            </div>
          </div>
        </section>
        
        <!-- CODE -->
        <section>
          <h3>The Implementation</h3>
          <pre><code class="language-python">import hashlib

class ContentAddressableStore:
    def __init__(self):
        self.objects = {}  # hash ‚Üí content
    
    def store(self, content: bytes) -> str:
        # Content determines address
        hash_id = hashlib.sha1(content).hexdigest()
        
        # Only store if we haven't seen it
        if hash_id not in self.objects:
            self.objects[hash_id] = content
            print(f"Stored new: {hash_id[:8]}...")
        else:
            print(f"Already exists: {hash_id[:8]}...")
        
        return hash_id

# Usage: Same content = same hash = stored once
store = ContentAddressableStore()
store.store(b"Hello")  # Stored new: a0b65939...
store.store(b"Hello")  # Already exists: a0b65939...
store.store(b"World")  # Stored new: 78b94a3c...</code></pre>
        </section>
      </section>

      <!-- ============ ACT 3: Cycle Detection ============ -->
      <section>
        <section>
          <h2>Act 3: Scale Break #2</h2>
          <h3 style="color:#ef4444;">Structural Integrity üîÑ</h3>
        </section>
        <section>
          <div class="scale-break">
            <strong>‚ö†Ô∏è The Engineering Lesson</strong><br>
            In naive linked list implementations, cycles can cause infinite loops.<br>
            Git avoids this <em>structurally</em>: commit hashes include parent hashes, making cycles impossible without breaking hash integrity.
          </div>
        </section>
        <section>
          <div class="feynman-why">
            <strong>Why learn cycle detection anyway?</strong><br>
            It's a classic linked-list safety technique. Git enforces the DAG invariant via content-addressing, but the <em>engineering lesson</em> is universal: <strong>never trust pointer structures blindly</strong>.
          </div>
        </section>
        <section>
          <h3>üìä Cycle Detection Demo</h3>
          <div class="animation-canvas" id="canvas3"></div>
          <div class="control-panel">
            <button class="btn" onclick="anim3.createValidChain()">Create Valid Chain</button>
            <button class="btn secondary" onclick="anim3.injectCycle()">Inject Cycle ‚ö†Ô∏è</button>
            <button class="btn success" onclick="anim3.detectCycle()">Run Floyd's</button>
            <button class="btn" onclick="anim3.reset()">Reset</button>
          </div>
          <div id="cycle-result" class="result-box"></div>
        </section>
        <section>
          <h3>Floyd's Cycle Detection</h3>
          <p style="font-size:0.85em;">Classic algorithm: Two pointers (slow/fast). If they meet ‚Üí cycle exists.</p>
          <pre><code class="language-python"># Classic cycle detection for any linked structure
def validate_no_cycles(head):
    if not head:
        return True
    
    slow = fast = head
    
    while fast and fast.parent:
        slow = slow.parent           # Move 1 step
        fast = fast.parent.parent    # Move 2 steps
        
        if slow is fast:
            raise SystemError("Cycle detected!")
    
    return True  # No cycle found

# Note: Git prevents cycles via content-addressing,
# but this pattern applies to any graph traversal</code></pre>
        </section>
        <section>
          <h3>Production Implementation</h3>
          <pre><code class="language-python">class GitIntegrityChecker:
    def validate_commit_dag(self, head):
        # Floyd's cycle detection for commit DAG
        slow = fast = head
        while fast and fast.parent:
            slow = slow.parent
            fast = fast.parent.parent
            if slow is fast:
                raise SystemError("Cycle detected!")
        return True

    def run_fsck(self, repo):
        # Validate all refs and report issues
        for ref in repo.refs:
            try:
                self.validate_commit_dag(ref.head)
            except SystemError as e:
                print(f"[ERROR] {ref.name}: {e}")
        print("Integrity check complete.")</code></pre>
        </section>
      </section>

      <!-- ============ ACT 3.5: Memory Bounds ============ -->
      <section>
        <section>
          <h2>Act 3.5: Scale Break #3</h2>
          <h3 style="color:#f59e42;">Unbounded Memory Growth üìà</h3>
        </section>
        <section>
          <div class="scale-break">
            <strong>‚ö†Ô∏è The Problem</strong><br>
            Naive tools that materialize commit lists into memory will OOM on large repos.<br>
            100K commits √ó 10KB = 1GB RAM. 10M commits = system crash.
          </div>
        </section>
        <section>
          <div class="feynman-why">
            <strong>Why does this matter?</strong><br>
            Git avoids this by streaming traversal and using precomputed commit-graphs.<br>
            If <em>you</em> build tools on Git, you need the same discipline ‚Äî or your code won't scale.
          </div>
        </section>
        <section>
          <h3>üìä Memory Growth Demo</h3>
          <div class="animation-canvas" id="canvas3b"></div>
          <div class="control-panel">
            <button class="btn secondary" onclick="anim3b.startUnbounded()">Load Without Limits</button>
            <button class="btn success" onclick="anim3b.startBounded()">Load With Streaming</button>
            <button class="btn" onclick="anim3b.reset()">Reset</button>
          </div>
          <div id="memory-result" class="result-box"></div>
        </section>
        <section>
          <h3>Unbounded vs Bounded</h3>
          <div class="comparison">
            <div class="comparison-side naive">
              <div class="comparison-title" style="color:#f5576c;">‚ùå Load All Into Memory</div>
              <ul>
                <li>Read entire history</li>
                <li>Store all commits in RAM</li>
                <li>OOM on large repos</li>
              </ul>
            </div>
            <div class="comparison-side production">
              <div class="comparison-title" style="color:#3ec6a8;">‚úì Streaming + Pagination</div>
              <ul>
                <li>Load commits on-demand</li>
                <li>Fixed memory window</li>
                <li>LRU cache eviction</li>
              </ul>
            </div>
          </div>
        </section>
        <section>
          <div class="stats-row">
            <div class="stat-card">
              <div class="stat-label">Unbounded Peak</div>
              <div class="stat-value" style="color:#f5576c;">8 GB</div>
            </div>
            <div class="stat-card">
              <div class="stat-label">Bounded Peak</div>
              <div class="stat-value" style="color:#3ec6a8;">256 MB</div>
            </div>
            <div class="stat-card">
              <div class="stat-label">Memory Saved</div>
              <div class="stat-value">97%</div>
            </div>
          </div>
        </section>
      </section>

      <!-- ============ ACT 4: Engineering Layers ============ -->
      <section>
        <section>
          <h2>Act 4: The Transformation</h2>
          <h3 style="color:#10b981;">15 Lines ‚Üí 300+ Lines üèóÔ∏è</h3>
        </section>
        <section>
          <p class="act-intro">
            The algorithm stays the same. What changes is <strong>everything around it</strong>.<br><br>
            Watch as we add production layers: persistence, validation, optimization, monitoring.
          </p>
        </section>
        <section>
          <div class="feynman-why">
            <strong>Why does this matter?</strong><br>
            Real-world code is more than algorithms. It's about reliability, speed, and safety at scale.
          </div>
        </section>
        <section>
          <h3>üìä Layer Cake Animation</h3>
          <div class="animation-canvas" id="canvas4"></div>
          <div class="control-panel">
            <button class="btn success" onclick="anim4.startAnimation()">Build Layers</button>
            <button class="btn" onclick="anim4.reset()">Reset</button>
          </div>
        </section>
        <section>
          <h3>Naive vs Production</h3>
          <div class="comparison">
            <div class="comparison-side naive">
              <div class="comparison-title" style="color:#f5576c;">Naive (15 lines)</div>
              <ul>
                <li>‚úì Works for demo</li>
                <li>‚ùå No persistence</li>
                <li>‚ùå No validation</li>
                <li>‚ùå No error handling</li>
                <li>‚ùå No optimization</li>
              </ul>
            </div>
            <div class="comparison-side production">
              <div class="comparison-title" style="color:#3ec6a8;">Production (300+ lines)</div>
              <ul>
                <li>‚úì Content-addressable</li>
                <li>‚úì Cycle detection</li>
                <li>‚úì Packfile compression</li>
                <li>‚úì Binary search indexes</li>
                <li>‚úì Metrics & observability</li>
              </ul>
            </div>
          </div>
        </section>
        <section>
          <div class="stats-row">
            <div class="stat-card">
              <div class="stat-label">Code Growth</div>
              <div class="stat-value">20x</div>
            </div>
            <div class="stat-card">
              <div class="stat-label">Layers</div>
              <div class="stat-value">4</div>
            </div>
            <div class="stat-card">
              <div class="stat-label">Real Git</div>
              <div class="stat-value">500K+</div>
            </div>
          </div>
        </section>
      </section>

      <!-- ============ ACT 4.5: Binary Search Race ============ -->
      <section>
        <section>
          <h2>Act 4.5: Scale Break #4</h2>
          <h3 style="color:#3b82f6;">Search Speed üèéÔ∏è</h3>
        </section>
        <section>
          <div class="scale-break">
            <strong>‚ö†Ô∏è The Problem</strong><br>
            Finding a commit in 100K objects with linear search = O(n) = 100K checks.<br>
            With binary search in sorted .idx files = O(log n) = 17 checks.<br>
            <strong>That's a 5,882x speedup!</strong>
          </div>
        </section>
        <section>
          <div class="feynman-why">
            <strong>Why does this matter?</strong><br>
            Indexes reduce most common traversals from seconds to milliseconds.<br>
            <em>But worst-case walks still exist</em> ‚Äî commit-graph helps some queries, bitmap indexes help reachability, yet pathological cases remain.
          </div>
        </section>
        <section>
          <h3>üìä Search Race</h3>
          <div class="animation-canvas" id="canvas4b"></div>
          <div class="control-panel">
            <button class="btn success" onclick="anim4b.startRace()">Start Race!</button>
            <button class="btn" onclick="anim4b.reset()">Reset</button>
          </div>
          <div class="stats-row">
            <div class="stat-card">
              <div class="stat-label">Linear</div>
              <div class="stat-value" style="color:#f5576c;" id="linear-checks">0</div>
            </div>
            <div class="stat-card">
              <div class="stat-label">Binary</div>
              <div class="stat-value" style="color:#3ec6a8;" id="binary-checks">0</div>
            </div>
            <div class="stat-card">
              <div class="stat-label">Speedup</div>
              <div class="stat-value" id="speedup-factor">0x</div>
            </div>
          </div>
          <div id="race-result" class="result-box"></div>
        </section>
        <section>
          <h3>Linear vs Binary Search</h3>
          <div class="comparison">
            <div class="comparison-side naive">
              <div class="comparison-title" style="color:#f5576c;">‚ùå Linear Search</div>
              <ul>
                <li>Check every object</li>
                <li>Time: O(n)</li>
                <li>100K objects = 100K checks</li>
              </ul>
            </div>
            <div class="comparison-side production">
              <div class="comparison-title" style="color:#3ec6a8;">‚úì Binary Search (.idx)</div>
              <ul>
                <li>Sorted index file</li>
                <li>Time: O(log n)</li>
                <li>100K objects = 17 checks</li>
              </ul>
            </div>
          </div>
        </section>
        <section>
          <h3>The Code</h3>
          <pre><code class="language-python">def find_object_linear(objects, target_hash):
    # O(n) - check every object
    for obj in objects:
        if obj.hash == target_hash:
            return obj
    return None

def find_object_binary(idx_file, target_hash):
    # O(log n) - binary search in sorted .idx
    left, right = 0, len(idx_file) - 1
    
    while left <= right:
        mid = (left + right) // 2
        if idx_file[mid].hash == target_hash:
            return idx_file[mid]
        elif idx_file[mid].hash < target_hash:
            left = mid + 1
        else:
            right = mid - 1
    return None

# 100,000 objects: Linear = 100K, Binary = 17 checks</code></pre>
        </section>
        <section>
          <div class="stats-row">
            <div class="stat-card">
              <div class="stat-label">Linear</div>
              <div class="stat-value" style="color:#f5576c;">100K</div>
            </div>
            <div class="stat-card">
              <div class="stat-label">Binary</div>
              <div class="stat-value" style="color:#3ec6a8;">17</div>
            </div>
            <div class="stat-card">
              <div class="stat-label">Speedup</div>
              <div class="stat-value">5,882x</div>
            </div>
          </div>
        </section>
      </section>

      <!-- ============ ACT 5: The Final Transformation ============ -->
      <section>
        <section>
          <h2>Act 5: The Final Transformation</h2>
          <h3 style="color:#a21caf;">What Distinguishes Levels üéì</h3>
        </section>
        <section>
          <blockquote style="font-size:0.95em;">
            <strong>Junior engineer:</strong> "Does it work?"<br>
            <strong>Senior engineer:</strong> "Does it scale?"<br>
            <strong>Staff engineer:</strong> "What breaks first, and how do we design for it?"
          </blockquote>
        </section>
        <section>
          <div class="feynman-why">
            <strong>Why does this matter?</strong><br>
            The leap from code to product is engineering. This is how ideas change the world.
          </div>
        </section>
        <section>
          <h3>üìä The Evolution</h3>
          <div class="animation-canvas" id="canvas5"></div>
          <div class="control-panel">
            <button class="btn success" onclick="anim5.startEvolution()">Watch Evolution</button>
            <button class="btn" onclick="anim5.reset()">Reset</button>
          </div>
        </section>
        <section>
          <h3>The Journey</h3>
          <p class="act-intro">
            The algorithm is just the beginning. Production systems require:<br><br>
            <strong style="color:#667eea;">Persistence</strong> ‚Äî Content-addressable storage with atomic writes<br>
            <strong style="color:#764ba2;">Memory</strong> ‚Äî Delta compression and packfiles<br>
            <strong style="color:#f093fb;">Integrity</strong> ‚Äî Structural guarantees via content-addressing<br>
            <strong style="color:#4facfe;">Speed</strong> ‚Äî Binary search indexes for O(log n) lookups
          </p>
        </section>
        <section>
          <h3>Takeaway</h3>
          <p class="act-intro" style="font-size:1.1em;">
            The algorithm stayed the same.<br>
            <strong style="color:#facc15;">The engineering discipline made it real.</strong>
          </p>
          <div class="stats-row">
            <div class="stat-card">
              <div class="stat-label">LeetCode</div>
              <div class="stat-value">15</div>
            </div>
            <div class="stat-card">
              <div class="stat-label">Production</div>
              <div class="stat-value">300+</div>
            </div>
            <div class="stat-card">
              <div class="stat-label">Real Git</div>
              <div class="stat-value">500K+</div>
            </div>
          </div>
        </section>
      </section>

      <!-- ============ EPILOGUE ============ -->
      <section>
        <section>
          <h2>Epilogue</h2>
          <blockquote style="font-size:1.1em;">
            "We've come full circle."
          </blockquote>
        </section>
        <section>
          <p class="act-intro" style="font-size:1em;">
            From a simple linked list traversal to a system used by 100 million developers.<br><br>
            <strong>The parent-pointer chain</strong> is everywhere‚Äîin every <code>git log</code>, every branch walk, every bisect.<br><br>
            <em style="color:#4facfe;">Now you see it. Now you understand it.</em>
          </p>
        </section>
        <section>
          <h3>What's Next?</h3>
          <p class="act-intro">
            <strong>Episode 2:</strong> The Invisible Tree ‚Äî How Git stores your entire codebase<br>
            <strong>Episode 3:</strong> The Invisible Graph ‚Äî Branches, merges, and the full DAG<br>
            <strong>Episode 4:</strong> The Invisible Network ‚Äî Distributed systems and sync
          </p>
        </section>
        <section>
          <h2>Thank You!</h2>
          <p style="font-size:1.2em;">üîó From LeetCode to Production</p>
          <p style="opacity:0.7;">Press <strong>S</strong> for speaker notes</p>
        </section>
      </section>

    </div>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/reveal.js/dist/reveal.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/reveal.js/plugin/highlight/highlight.js"></script>
  <script>
    // ========== ANIMATION CLASSES ==========
    
    // Animation 1: Linked List Pointer Dance
    class LinkedListAnimation {
      constructor(canvasId) {
        this.canvas = document.getElementById(canvasId);
        this.commits = [];
        this.commitCount = 0;
        this.reversed = false;
      }
      addCommit() {
        this.commitCount++;
        const commit = {
          id: this.commitCount,
          x: 80 + (this.commits.length * 120),
          y: 140
        };
        this.commits.push(commit);
        this.render();
      }
      reverseList() {
        this.reversed = !this.reversed;
        this.render();
      }
      reset() {
        this.commits = [];
        this.commitCount = 0;
        this.reversed = false;
        if (this.canvas) this.canvas.innerHTML = '<div style="display:flex;align-items:center;justify-content:center;height:100%;opacity:0.5;">Click "Add Commit" to start</div>';
      }
      render() {
        if (!this.canvas) return;
        this.canvas.innerHTML = '';
        // Draw arrows
        for (let i = 0; i < this.commits.length - 1; i++) {
          const from = this.commits[i];
          const to = this.commits[i + 1];
          if (this.reversed) {
            this.drawArrow(to.x - 30, to.y, from.x + 30, from.y);
          } else {
            this.drawArrow(from.x + 30, from.y, to.x - 30, to.y);
          }
        }
        // Draw nodes
        this.commits.forEach((commit, idx) => {
          const node = document.createElement('div');
          node.className = 'node' + (idx === 0 ? ' highlight' : '');
          node.style.left = (commit.x - 30) + 'px';
          node.style.top = (commit.y - 30) + 'px';
          node.innerHTML = '<div class="label">' + (idx === 0 ? 'HEAD' : 'Commit') + '</div><div class="value">' + commit.id + '</div>';
          this.canvas.appendChild(node);
        });
      }
      drawArrow(x1, y1, x2, y2) {
        const arrow = document.createElement('div');
        arrow.className = 'arrow';
        const length = Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2));
        const angle = Math.atan2(y2 - y1, x2 - x1) * 180 / Math.PI;
        arrow.style.width = length + 'px';
        arrow.style.left = x1 + 'px';
        arrow.style.top = y1 + 'px';
        arrow.style.transform = 'rotate(' + angle + 'deg)';
        this.canvas.appendChild(arrow);
      }
    }

    // Animation 1b: Git Log Traversal
    class GitLogAnimation {
      constructor(canvasId) {
        this.canvas = document.getElementById(canvasId);
        this.commits = [];
        this.commitCount = 0;
        this.isTraversing = false;
        this.currentIdx = -1;
        this.commitMessages = ['Initial commit', 'Add README', 'Fix bug #42', 'Add feature X', 'Refactor core', 'Update docs'];
      }
      addCommit() {
        const msg = this.commitMessages[this.commitCount % this.commitMessages.length];
        const hash = this.generateHash();
        this.commits.unshift({ 
          id: this.commitCount + 1, 
          hash: hash,
          message: msg,
          x: 80 + (this.commits.length * 110),
          y: 140
        });
        // Update positions
        this.commits.forEach((c, idx) => {
          c.x = 560 - (idx * 110);
        });
        this.commitCount++;
        this.render();
        this.updateOutput('');
      }
      generateHash() {
        return Math.random().toString(16).substr(2, 7);
      }
      async runGitLog() {
        if (this.commits.length === 0 || this.isTraversing) return;
        this.isTraversing = true;
        let output = '$ git log\\n';
        
        for (let i = 0; i < this.commits.length; i++) {
          this.currentIdx = i;
          this.render();
          const c = this.commits[i];
          output += '\\ncommit ' + c.hash + (i === 0 ? ' (HEAD)' : '') + '\\n';
          output += '    ' + c.message + '\\n';
          this.updateOutput(output);
          await this.sleep(800);
        }
        
        output += '\\n# End of log - traversed ' + this.commits.length + ' commits';
        this.updateOutput(output);
        this.currentIdx = -1;
        this.isTraversing = false;
        this.render();
      }
      sleep(ms) {
        return new Promise(resolve => setTimeout(resolve, ms));
      }
      updateOutput(text) {
        const el = document.getElementById('git-log-output');
        if (el) el.textContent = text.replace(/\\\\n/g, '\\n');
      }
      reset() {
        this.commits = [];
        this.commitCount = 0;
        this.isTraversing = false;
        this.currentIdx = -1;
        if (this.canvas) this.canvas.innerHTML = '<div style="display:flex;align-items:center;justify-content:center;height:100%;opacity:0.5;">Click "Make Commit" to create commits, then "Run git log"</div>';
        this.updateOutput('$ git log\\n# Click "Run git log" to traverse the linked list...');
      }
      render() {
        if (!this.canvas) return;
        this.canvas.innerHTML = '';
        
        // HEAD pointer
        if (this.commits.length > 0) {
          const headLabel = document.createElement('div');
          headLabel.style.cssText = 'position:absolute;left:' + (this.commits[0].x - 20) + 'px;top:60px;color:#f59e42;font-weight:bold;font-size:14px;';
          headLabel.innerHTML = '‚Üì HEAD';
          this.canvas.appendChild(headLabel);
        }
        
        // Draw arrows (parent pointers)
        for (let i = 0; i < this.commits.length - 1; i++) {
          const from = this.commits[i];
          const to = this.commits[i + 1];
          this.drawArrow(from.x - 30, from.y, to.x + 30, to.y, i === this.currentIdx);
        }
        
        // Draw nodes
        this.commits.forEach((commit, idx) => {
          const node = document.createElement('div');
          const isHighlighted = idx === this.currentIdx;
          node.className = 'node' + (isHighlighted ? ' highlight' : '');
          node.style.left = (commit.x - 30) + 'px';
          node.style.top = (commit.y - 30) + 'px';
          if (isHighlighted) {
            node.style.background = 'linear-gradient(135deg, #f59e42 0%, #facc15 100%)';
          }
          node.innerHTML = '<div class="label" style="font-size:8px;">' + commit.hash.substr(0,5) + '</div><div class="value" style="font-size:12px;">' + commit.message.substr(0,8) + '</div>';
          this.canvas.appendChild(node);
        });
        
        // NULL terminator
        if (this.commits.length > 0) {
          const nullNode = document.createElement('div');
          const lastCommit = this.commits[this.commits.length - 1];
          nullNode.style.cssText = 'position:absolute;left:' + (lastCommit.x - 100) + 'px;top:125px;color:#666;font-size:14px;font-style:italic;';
          nullNode.innerHTML = '‚Üê NULL (no parent)';
          this.canvas.appendChild(nullNode);
        }
      }
      drawArrow(x1, y1, x2, y2, isActive) {
        const arrow = document.createElement('div');
        arrow.className = 'arrow';
        arrow.style.background = isActive ? '#f59e42' : '#4facfe';
        arrow.style.height = isActive ? '4px' : '3px';
        const length = Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2));
        const angle = Math.atan2(y2 - y1, x2 - x1) * 180 / Math.PI;
        arrow.style.width = length + 'px';
        arrow.style.left = x1 + 'px';
        arrow.style.top = y1 + 'px';
        arrow.style.transform = 'rotate(' + angle + 'deg)';
        this.canvas.appendChild(arrow);
      }
    }

    // Animation 2: Memory Growth (Snapshot vs Delta)
    class MemoryAnimation {
      constructor(canvasId) {
        this.canvas = document.getElementById(canvasId);
        this.commitCount = 0;
        this.isCompressed = false;
      }
      addCommits() {
        this.commitCount += 10;
        this.render();
      }
      applyPackfile() {
        this.isCompressed = true;
        this.render();
      }
      reset() {
        this.commitCount = 0;
        this.isCompressed = false;
        this.render();
      }
      render() {
        if (!this.canvas) return;
        const naiveSize = this.commitCount * 10;
        const packfileSize = this.isCompressed ? Math.ceil(this.commitCount * 0.5) : naiveSize;
        const naiveHeight = Math.min(240, naiveSize * 1.5);
        const packfileHeight = Math.min(240, packfileSize * 1.5);
        
        this.canvas.innerHTML = '<div style="display:flex;justify-content:space-around;align-items:flex-end;height:100%;padding:20px;">' +
          '<div style="text-align:center;"><div style="width:100px;height:' + naiveHeight + 'px;background:linear-gradient(180deg,#f5576c 0%,#f093fb 100%);border-radius:8px 8px 0 0;transition:height 0.8s ease;"></div><div style="margin-top:8px;font-weight:bold;color:#f5576c;">Naive</div></div>' +
          '<div style="text-align:center;"><div style="width:100px;height:' + packfileHeight + 'px;background:linear-gradient(180deg,#4facfe 0%,#00f2fe 100%);border-radius:8px 8px 0 0;transition:height 0.8s ease;"></div><div style="margin-top:8px;font-weight:bold;color:#4facfe;">Packfile</div></div>' +
          '</div>';
        
        const naiveEl = document.getElementById('naive-size');
        const packEl = document.getElementById('packfile-size');
        if (naiveEl) naiveEl.textContent = naiveSize + ' MB';
        if (packEl) packEl.textContent = packfileSize + ' MB';
      }
    }

    // Animation 2b: Content-Addressable Storage
    class ContentAddressableAnimation {
      constructor(canvasId) {
        this.canvas = document.getElementById(canvasId);
        this.filesAdded = 0;
        this.uniqueBlobs = 0;
        this.isDeduplicated = false;
      }
      addDuplicateFiles() {
        this.filesAdded += 5;
        this.uniqueBlobs = this.isDeduplicated ? 3 : this.filesAdded;
        this.render();
      }
      deduplicate() {
        this.isDeduplicated = true;
        this.uniqueBlobs = 3;
        this.render();
      }
      reset() {
        this.filesAdded = 0;
        this.uniqueBlobs = 0;
        this.isDeduplicated = false;
        this.render();
      }
      render() {
        if (!this.canvas) return;
        const colors = ['#667eea', '#764ba2', '#f093fb'];
        let filesHTML = '';
        let blobsHTML = '';
        
        for (let i = 0; i < Math.min(this.filesAdded, 15); i++) {
          const row = Math.floor(i / 5);
          const col = i % 5;
          filesHTML += '<div style="width:35px;height:35px;background:' + colors[i % 3] + ';border-radius:4px;position:absolute;left:' + (20 + col * 40) + 'px;top:' + (40 + row * 40) + 'px;opacity:0.8;transition:all 0.5s;"></div>';
        }
        
        for (let i = 0; i < Math.min(this.uniqueBlobs, 15); i++) {
          const row = Math.floor(i / 5);
          const col = i % 5;
          blobsHTML += '<div style="width:40px;height:40px;background:linear-gradient(135deg,' + colors[i % 3] + ',' + colors[i % 3] + 'cc);border-radius:6px;border:2px solid rgba(255,255,255,0.4);position:absolute;right:' + (20 + col * 45) + 'px;top:' + (40 + row * 45) + 'px;box-shadow:0 4px 12px rgba(102,126,234,0.4);transition:all 0.5s;"></div>';
        }
        
        this.canvas.innerHTML = '<div style="display:flex;height:100%;">' +
          '<div style="width:45%;position:relative;border:2px dashed rgba(245,87,108,0.4);border-radius:8px;margin:10px;"><div style="position:absolute;top:8px;left:8px;font-size:12px;color:#f5576c;font-weight:bold;">Files Added</div>' + filesHTML + '</div>' +
          '<div style="display:flex;align-items:center;font-size:2em;color:' + (this.isDeduplicated ? '#4facfe' : '#666') + ';">‚Üí</div>' +
          '<div style="width:45%;position:relative;border:2px dashed rgba(79,172,254,0.4);border-radius:8px;margin:10px;"><div style="position:absolute;top:8px;left:8px;font-size:12px;color:#4facfe;font-weight:bold;">Unique Blobs</div>' + blobsHTML + '</div>' +
          '</div>';
        
        const filesEl = document.getElementById('files-added');
        const blobsEl = document.getElementById('blobs-stored');
        if (filesEl) filesEl.textContent = this.filesAdded;
        if (blobsEl) blobsEl.textContent = this.uniqueBlobs;
      }
    }

    // Animation 3: Cycle Detection
    class CycleDetectionAnimation {
      constructor(canvasId) {
        this.canvas = document.getElementById(canvasId);
        this.nodes = [];
        this.hasCycle = false;
      }
      createValidChain() {
        this.hasCycle = false;
        this.nodes = [];
        const positions = [{x:80,y:140},{x:200,y:100},{x:320,y:160},{x:440,y:120},{x:560,y:140}];
        for (let i = 0; i < 5; i++) {
          this.nodes.push({ id: i + 1, x: positions[i].x, y: positions[i].y, next: i < 4 ? i + 1 : null });
        }
        this.render();
        this.hideResult();
      }
      injectCycle() {
        if (this.nodes.length < 3) this.createValidChain();
        this.nodes[this.nodes.length - 1].next = 2;
        this.hasCycle = true;
        this.render();
        this.hideResult();
      }
      detectCycle() {
        if (this.nodes.length === 0) return;
        const resultDiv = document.getElementById('cycle-result');
        if (!resultDiv) return;
        resultDiv.style.display = 'block';
        if (this.hasCycle) {
          resultDiv.className = 'result-box error';
          resultDiv.innerHTML = '<strong>‚ö†Ô∏è CYCLE DETECTED!</strong> Floyd\'s algorithm found corruption. Git would fail with an error.';
        } else {
          resultDiv.className = 'result-box success';
          resultDiv.innerHTML = '<strong>‚úì NO CYCLE FOUND</strong> Repository structure is valid.';
        }
      }
      reset() {
        this.nodes = [];
        this.hasCycle = false;
        if (this.canvas) this.canvas.innerHTML = '<div style="display:flex;align-items:center;justify-content:center;height:100%;opacity:0.5;">Click "Create Valid Chain" to start</div>';
        this.hideResult();
      }
      hideResult() {
        const resultDiv = document.getElementById('cycle-result');
        if (resultDiv) resultDiv.style.display = 'none';
      }
      render() {
        if (!this.canvas) return;
        this.canvas.innerHTML = '';
        this.nodes.forEach((node, idx) => {
          const nodeEl = document.createElement('div');
          nodeEl.className = 'node';
          nodeEl.style.left = (node.x - 30) + 'px';
          nodeEl.style.top = (node.y - 30) + 'px';
          nodeEl.innerHTML = '<div class="label">Node</div><div class="value">' + node.id + '</div>';
          this.canvas.appendChild(nodeEl);
          if (node.next !== null) {
            const nextNode = this.nodes[node.next];
            this.drawArrow(node.x + 30, node.y, nextNode.x - 30, nextNode.y);
          }
        });
      }
      drawArrow(x1, y1, x2, y2) {
        const arrow = document.createElement('div');
        arrow.className = 'arrow';
        if (this.hasCycle && x2 < x1) arrow.style.background = '#f5576c';
        const length = Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2));
        const angle = Math.atan2(y2 - y1, x2 - x1) * 180 / Math.PI;
        arrow.style.width = length + 'px';
        arrow.style.left = x1 + 'px';
        arrow.style.top = y1 + 'px';
        arrow.style.transform = 'rotate(' + angle + 'deg)';
        this.canvas.appendChild(arrow);
      }
    }

    // Animation 3b: Memory Leak
    class MemoryLeakAnimation {
      constructor(canvasId) {
        this.canvas = document.getElementById(canvasId);
        this.unboundedMemory = 0;
        this.boundedMemory = 0;
        this.isAnimating = false;
        this.mode = null;
      }
      startUnbounded() {
        if (this.isAnimating) return;
        this.reset();
        this.isAnimating = true;
        this.mode = 'unbounded';
        this.animateUnbounded();
      }
      startBounded() {
        if (this.isAnimating) return;
        this.reset();
        this.isAnimating = true;
        this.mode = 'bounded';
        this.animateBounded();
      }
      animateUnbounded() {
        if (!this.isAnimating || this.mode !== 'unbounded') return;
        this.unboundedMemory += 0.4;
        this.render();
        if (this.unboundedMemory >= 8) {
          this.isAnimating = false;
          const resultDiv = document.getElementById('memory-result');
          if (resultDiv) {
            resultDiv.style.display = 'block';
            resultDiv.className = 'result-box error';
            resultDiv.innerHTML = '<strong>üí• CRASH - OUT OF MEMORY!</strong> No bounds = system instability.';
          }
        } else {
          setTimeout(() => this.animateUnbounded(), 150);
        }
      }
      animateBounded() {
        if (!this.isAnimating || this.mode !== 'bounded') return;
        this.boundedMemory = 256;
        this.unboundedMemory += 0.4;
        this.render();
        if (this.unboundedMemory >= 8) {
          this.isAnimating = false;
          const resultDiv = document.getElementById('memory-result');
          if (resultDiv) {
            resultDiv.style.display = 'block';
            resultDiv.className = 'result-box success';
            resultDiv.innerHTML = '<strong>‚úì STABLE</strong> Streaming keeps memory at 256MB while processing 8GB of data.';
          }
        } else {
          setTimeout(() => this.animateBounded(), 150);
        }
      }
      reset() {
        this.unboundedMemory = 0;
        this.boundedMemory = 0;
        this.isAnimating = false;
        this.mode = null;
        const resultDiv = document.getElementById('memory-result');
        if (resultDiv) resultDiv.style.display = 'none';
        this.render();
      }
      render() {
        if (!this.canvas) return;
        const unboundedHeight = Math.min(240, this.unboundedMemory * 28);
        const boundedHeight = this.mode === 'bounded' ? 80 : 0;
        const unboundedColor = this.unboundedMemory > 6 ? '#f5576c' : this.unboundedMemory > 4 ? '#f093fb' : '#764ba2';
        
        this.canvas.innerHTML = '<div style="display:flex;justify-content:space-around;align-items:flex-end;height:100%;padding:20px;">' +
          '<div style="text-align:center;"><div style="width:100px;height:' + unboundedHeight + 'px;background:linear-gradient(180deg,' + unboundedColor + ',#f093fb);border-radius:8px 8px 0 0;transition:height 0.3s;position:relative;">' + (this.unboundedMemory > 6 ? '<div style="position:absolute;top:5px;left:50%;transform:translateX(-50%);font-size:1.5em;">‚ö†Ô∏è</div>' : '') + '</div><div style="margin-top:8px;font-weight:bold;color:#f5576c;">Unbounded</div><div style="color:#f5576c;">' + this.unboundedMemory.toFixed(1) + ' GB</div></div>' +
          '<div style="text-align:center;"><div style="width:100px;height:' + boundedHeight + 'px;background:linear-gradient(180deg,#4facfe,#00f2fe);border-radius:8px 8px 0 0;transition:height 0.3s;"></div><div style="margin-top:8px;font-weight:bold;color:#4facfe;">Bounded</div><div style="color:#4facfe;">' + this.boundedMemory + ' MB</div></div>' +
          '</div>';
      }
    }

    // Animation 4: Engineering Layers
    class EngineeringLayersAnimation {
      constructor(canvasId) {
        this.canvas = document.getElementById(canvasId);
        this.layers = [
          { name: 'Algorithm Core', color: '#667eea', lines: '15 lines' },
          { name: 'Persistence', color: '#764ba2', lines: '+50 lines' },
          { name: 'Validation', color: '#f093fb', lines: '+75 lines' },
          { name: 'Optimization', color: '#4facfe', lines: '+90 lines' },
          { name: 'Monitoring', color: '#00f2fe', lines: '+75 lines' }
        ];
        this.currentLayer = 0;
        this.isAnimating = false;
      }
      startAnimation() {
        if (this.isAnimating) return;
        this.reset();
        this.isAnimating = true;
        this.currentLayer = 0;
        this.animateNextLayer();
      }
      animateNextLayer() {
        if (!this.isAnimating || this.currentLayer >= this.layers.length) {
          this.isAnimating = false;
          return;
        }
        const layer = this.layers[this.currentLayer];
        const layerEl = document.createElement('div');
        const yPos = 220 - (this.currentLayer + 1) * 42;
        layerEl.style.cssText = 'position:absolute;left:50%;transform:translateX(-50%);top:' + yPos + 'px;width:400px;height:38px;background:linear-gradient(135deg,' + layer.color + ',' + layer.color + 'dd);border:1px solid rgba(255,255,255,0.3);border-radius:6px;opacity:0;animation:fadeIn 0.6s ease forwards;display:flex;align-items:center;justify-content:space-between;padding:0 15px;color:#fff;font-size:13px;box-shadow:0 4px 15px rgba(0,0,0,0.3);';
        layerEl.innerHTML = '<span style="font-weight:bold;">' + layer.name + '</span><span style="opacity:0.8;">' + layer.lines + '</span>';
        this.canvas.appendChild(layerEl);
        this.currentLayer++;
        setTimeout(() => this.animateNextLayer(), 800);
      }
      reset() {
        this.currentLayer = 0;
        this.isAnimating = false;
        if (this.canvas) this.canvas.innerHTML = '';
      }
    }

    // Animation 4b: Binary Search Race
    class BinarySearchAnimation {
      constructor(canvasId) {
        this.canvas = document.getElementById(canvasId);
        this.linearChecks = 0;
        this.binaryChecks = 0;
        this.targetPosition = 87432;
        this.isRacing = false;
      }
      startRace() {
        if (this.isRacing) return;
        this.reset();
        this.isRacing = true;
        this.race();
      }
      race() {
        const linearInterval = setInterval(() => {
          if (!this.isRacing) { clearInterval(linearInterval); return; }
          this.linearChecks += 2500;
          const el = document.getElementById('linear-checks');
          if (el) el.textContent = this.linearChecks.toLocaleString();
          if (this.linearChecks >= this.targetPosition) {
            this.linearChecks = this.targetPosition;
            clearInterval(linearInterval);
            this.showResult();
          }
          this.render();
        }, 80);
        
        const binaryInterval = setInterval(() => {
          if (!this.isRacing) { clearInterval(binaryInterval); return; }
          this.binaryChecks++;
          const el = document.getElementById('binary-checks');
          if (el) el.textContent = this.binaryChecks;
          if (this.binaryChecks >= 17) clearInterval(binaryInterval);
          this.render();
        }, 300);
      }
      showResult() {
        this.isRacing = false;
        const speedup = Math.floor(this.linearChecks / this.binaryChecks);
        const el = document.getElementById('speedup-factor');
        if (el) el.textContent = speedup.toLocaleString() + 'x';
        const resultDiv = document.getElementById('race-result');
        if (resultDiv) {
          resultDiv.style.display = 'block';
          resultDiv.className = 'result-box success';
          resultDiv.innerHTML = '<strong>üèÅ BINARY SEARCH WINS!</strong> ' + speedup.toLocaleString() + 'x faster. This is why Git builds .idx files.';
        }
      }
      reset() {
        this.linearChecks = 0;
        this.binaryChecks = 0;
        this.isRacing = false;
        const linearEl = document.getElementById('linear-checks');
        const binaryEl = document.getElementById('binary-checks');
        const speedupEl = document.getElementById('speedup-factor');
        const resultDiv = document.getElementById('race-result');
        if (linearEl) linearEl.textContent = '0';
        if (binaryEl) binaryEl.textContent = '0';
        if (speedupEl) speedupEl.textContent = '0x';
        if (resultDiv) resultDiv.style.display = 'none';
        this.render();
      }
      render() {
        if (!this.canvas) return;
        const linearProgress = Math.min(100, (this.linearChecks / this.targetPosition) * 100);
        const binaryProgress = Math.min(100, (this.binaryChecks / 17) * 100);
        
        this.canvas.innerHTML = '<div style="display:flex;flex-direction:column;justify-content:center;height:100%;padding:25px;">' +
          '<div style="margin-bottom:30px;"><div style="display:flex;justify-content:space-between;margin-bottom:8px;font-size:13px;"><span style="color:#f5576c;font-weight:bold;">üî¥ Linear O(n)</span><span style="color:#f5576c;">' + this.linearChecks.toLocaleString() + '</span></div><div style="width:100%;height:30px;background:rgba(255,255,255,0.1);border-radius:15px;overflow:hidden;"><div style="width:' + linearProgress + '%;height:100%;background:linear-gradient(90deg,#f5576c,#f093fb);transition:width 0.2s;display:flex;align-items:center;justify-content:flex-end;padding-right:10px;">' + (linearProgress > 8 ? 'üèÉ' : '') + '</div></div></div>' +
          '<div><div style="display:flex;justify-content:space-between;margin-bottom:8px;font-size:13px;"><span style="color:#4facfe;font-weight:bold;">üîµ Binary O(log n)</span><span style="color:#4facfe;">' + this.binaryChecks + '</span></div><div style="width:100%;height:30px;background:rgba(255,255,255,0.1);border-radius:15px;overflow:hidden;"><div style="width:' + binaryProgress + '%;height:100%;background:linear-gradient(90deg,#4facfe,#00f2fe);transition:width 0.3s;display:flex;align-items:center;justify-content:flex-end;padding-right:10px;">' + (binaryProgress > 8 ? 'üöÄ' : '') + '</div></div></div>' +
          '</div>';
      }
    }

    // Animation 5: Evolution Summary
    class EvolutionAnimation {
      constructor(canvasId) {
        this.canvas = document.getElementById(canvasId);
        this.stages = [
          { icon: 'üîó', label: 'Linked List', color: '#667eea' },
          { icon: 'üì¶', label: 'Packfiles', color: '#764ba2' },
          { icon: '#Ô∏è‚É£', label: 'Hashing', color: '#f093fb' },
          { icon: 'üîÑ', label: 'Cycle Detection', color: '#4facfe' },
          { icon: 'üìä', label: 'Streaming', color: '#00f2fe' },
          { icon: '‚ö°', label: 'Binary Search', color: '#facc15' },
          { icon: 'üéØ', label: 'Production Git', color: '#3ec6a8' }
        ];
        this.currentStage = 0;
        this.isAnimating = false;
      }
      startEvolution() {
        if (this.isAnimating) return;
        this.reset();
        this.isAnimating = true;
        this.currentStage = 0;
        this.animateNextStage();
      }
      animateNextStage() {
        if (!this.isAnimating || this.currentStage >= this.stages.length) {
          this.isAnimating = false;
          return;
        }
        const stage = this.stages[this.currentStage];
        const stageEl = document.createElement('div');
        const xPos = 40 + this.currentStage * 80;
        stageEl.style.cssText = 'position:absolute;left:' + xPos + 'px;top:50%;transform:translateY(-50%);text-align:center;opacity:0;animation:fadeIn 0.5s ease forwards;';
        stageEl.innerHTML = '<div style="width:50px;height:50px;border-radius:50%;background:' + stage.color + ';display:flex;align-items:center;justify-content:center;font-size:1.5em;margin:0 auto 8px;box-shadow:0 4px 15px ' + stage.color + '66;">' + stage.icon + '</div><div style="font-size:10px;color:#fff;max-width:70px;">' + stage.label + '</div>';
        this.canvas.appendChild(stageEl);
        
        // Draw connecting line
        if (this.currentStage > 0) {
          const line = document.createElement('div');
          line.style.cssText = 'position:absolute;left:' + (xPos - 25) + 'px;top:50%;width:30px;height:2px;background:#4facfe;transform:translateY(-50%);opacity:0;animation:fadeIn 0.3s ease forwards;';
          this.canvas.appendChild(line);
        }
        
        this.currentStage++;
        setTimeout(() => this.animateNextStage(), 500);
      }
      reset() {
        this.currentStage = 0;
        this.isAnimating = false;
        if (this.canvas) this.canvas.innerHTML = '<div style="display:flex;align-items:center;justify-content:center;height:100%;opacity:0.5;">Click "Watch Evolution" to see the journey</div>';
      }
    }

    // ========== INITIALIZE ==========
    let anim1, gitLogAnim, anim2, anim2b, anim3, anim3b, anim4, anim4b, anim5;
    
    Reveal.initialize({
      hash: true,
      slideNumber: 'c/t',
      showSlideNumber: 'all',
      transition: 'slide',
      transitionSpeed: 'default',
      backgroundTransition: 'fade',
      plugins: [RevealHighlight],
      navigationMode: 'default',
      progress: true,
      controls: true,
      center: true,
      keyboard: true,
      width: 1920,
      height: 1080,
      margin: 0.04,
      minScale: 0.2,
      maxScale: 1.0
    });

    // Initialize animations after Reveal is ready
    Reveal.on('ready', () => {
      anim1 = new LinkedListAnimation('canvas1');
      gitLogAnim = new GitLogAnimation('canvas-gitlog');
      anim2 = new MemoryAnimation('canvas2');
      anim2b = new ContentAddressableAnimation('canvas2b');
      anim3 = new CycleDetectionAnimation('canvas3');
      anim3b = new MemoryLeakAnimation('canvas3b');
      anim4 = new EngineeringLayersAnimation('canvas4');
      anim4b = new BinarySearchAnimation('canvas4b');
      anim5 = new EvolutionAnimation('canvas5');
      
      // Set initial states
      if (anim1) anim1.reset();
      if (gitLogAnim) gitLogAnim.reset();
      if (anim2) anim2.render();
      if (anim2b) anim2b.render();
      if (anim3) anim3.reset();
      if (anim3b) anim3b.render();
      if (anim4) anim4.reset();
      if (anim4b) anim4b.render();
      if (anim5) anim5.reset();
    });
  </script>
</body>
</html>
